  name: Update Versions                                                                                                                                                                                                      
  on:                                                                                                                                                                                                                        
    schedule:                                                                                                                                                                                                                
      - cron: '0 */6 * * *'  # toutes les 6h                                                                                                                                                                                 
    workflow_dispatch:                                                                                                                                                                                                       
                                                                                                                                                                                                                             
  jobs:                                                                                                                                                                                                                      
    update-versions:                                                                                                                                                                                                         
      runs-on: ubuntu-latest                                                                                                                                                                                                 
      steps:                                                                                                                                                                                                                 
        - uses: actions/checkout@v4                                                                                                                                                                                          
                                                                                                                                                                                                                             
        - name: Fetch versions                                                                                                                                                                                               
          env:                                                                                                                                                                                                               
            GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}                                                                                                                                                                            
          run: |                                                                                                                                                                                                             
            # Exemple: récupérer package.json, version tags, releases...                                                                                                                                                     
            gh api repos/owner/repo1/releases/latest --jq '.tag_name' > versions.json                                                                                                                                        
                                                                                                                                                                                                                             
        - name: Commit changes                                                                                                                                                                                               
          run: |                                                                                                                                                                                                             
            git config user.name "github-actions"                                                                                                                                                                            
            git config user.email "actions@github.com"                                                                                                                                                                       
            git add versions.json                                                                                                                                                                                            
            git commit -m "chore: update versions" || exit 0                                                                                                                                                                 
            git push   
